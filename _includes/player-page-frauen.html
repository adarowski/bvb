<div class="player-header">
  {% for player in site.data.players-frauen %}
    {% if player.id == include.player %}
      <img src="assets/images/frauen/365/{{ player.id }}.jpg" alt="{{ player.first }} {{ player.last }} Photo" width="200" />
      <div class="player-data">
        <h1>{{ player.first }} {{ player.last }}</h1>
        <ul>
          <li>
            <strong>
              {% if player.number %}
                #{{ player.number }}
                •
              {% endif %}
              {{ player.position }}
            </strong>
          </li>
          {% if player.dob %}
            <li><strong>Born:</strong> {{ player.dob | date: '%B %-d, %Y' }} <span class="player-age"><span></li>
          {% endif %}
          {% if player.prev_club %}
            <li><strong>Previous Club:</strong> {{ player.prev_club }}</li>
          {% endif %}
          <li><strong>Nationality:</strong> &nbsp;{{ player.flag }} {{ player.nation }}</li>
        </ul>
      </div>

      <script>
        function calculate_age(dob) {
          var diff_ms = Date.now() - dob.getTime();
          var age_dt = new Date(diff_ms);
          return Math.abs(age_dt.getUTCFullYear() - 1970);
        }

        var playerAge = document.querySelector('.player-age');

        playerAge.appendChild(document.createTextNode("(" + calculate_age(new Date("{{ player.dob }}")) + ")"));
      </script>

    {% endif %}
  {% endfor %}
</div>

{% for player in site.data.players-frauen %}
  {% if player.id == include.player %}
    {% if player.all_min != "0" %}
      <h2>Match Logs</h2>

      <div class="table-container">
        <table id="logs-list" class="players-table">
          <thead>
            <tr>
              <th class="left">Date</th>
              <th class="left">Opponent</th>
              <th class="left">Competition</th>
              <th class="left">Round</th>
              <th class="left">Venue</th>
              <th class="left">Result</th>
              <th class="right">Minutes</th>
              <th class="right">Goals</th>
              <th class="right">Assists</th>
            </tr>
          </thead>
          <tbody>
            {% for match in site.data.frauen-match-logs %}
              {% if match.id == include.player %}
                <tr>
                  <td class="left">{{ match.date }}</td>
                  <td class="left">{{ match.opponent }}</td>
                  <td class="left">{{ match.comp }}</td>
                  <td class="left">{{ match.round }}</td>
                  <td class="left">{{ match.venue }}</td>
                  <td class="left {{ match.result | downcase }}">{{ match.result }} {{ match.gf }}–{{ match.ga }}</td>
                  <td class="right">{{ match.mins }}</td>
                  <td class="right" data-value="{{ match.goals }}">{{ match.goals }}</td>
                  <td class="right" data-value="{{ match.assists }}">{{ match.assists }}</td>
                </tr>
              {% endif %}
            {% endfor %}
            {% for player in site.data.players-frauen %}
              {% if player.id == include.player %}
                {% if player.lg_min != "0" %}
                  <tr class="row-all">
                    <td class="left">League</td>
                    <td class="left"></td>
                    <td class="left"></td>
                    <td class="left"></td>
                    <td class="left"></td>
                    <td class="left"></td>
                    <td class="right">{{ player.lg_min }}</td>
                    <td class="right" data-value="{{ player.lg_g }}">{{ player.lg_g }}</td>
                    <td class="right" data-value="{{ player.lg_a }}">{{ player.lg_a }}</td>
                  </tr>
                {% endif %}
                {% if player.cup_min != "0" %}
                  <tr class="row-all">
                    <td class="left">Cup</td>
                    <td class="left"></td>
                    <td class="left"></td>
                    <td class="left"></td>
                    <td class="left"></td>
                    <td class="left"></td>
                    <td class="right">{{ player.cup_min }}</td>
                    <td class="right" data-value="{{ player.cup_g }}">{{ player.cup_g }}</td>
                    <td class="right" data-value="{{ player.cup_a }}">{{ player.cup_a }}</td>
                  </tr>
                {% endif %}
                <tr class="row-all">
                  <td class="left">All Comps</td>
                  <td class="left"></td>
                  <td class="left"></td>
                  <td class="left"></td>
                  <td class="left"></td>
                  <td class="left"></td>
                  <td class="right">{{ player.all_min }}</td>
                  <td class="right" data-value="{{ player.all_g }}">{{ player.all_g }}</td>
                  <td class="right" data-value="{{ player.all_a }}">{{ player.all_a }}</td>
                </tr>
              {% endif %}
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endif %}
  {% endif %}
{% endfor %}

<h2>Goal Involvements</h2>

<div class="goal-table-filter">
  <label for="goal-filter">Filter Goals</label>
  <input id="goal-filter" type="text" class="table-filter" data-table="goals-table" placeholder="Search for player, opponent, competition, etc." />
</div>

<div class="table-container">
  <table id="player-goals" class="goals-table">
    <thead>
      <tr>
        <th class="left">Scorer</th>
        <th class="left">Assist</th>
        <th class="left">Date</th>
        <th class="left">Competition</th>
        <th class="left">Round</th>
        <th class="right">Min</th>
        <th class="left">Opponent</th>
        <th class="left">Venue</th>
        <th class="right">GF</th>
        <th class="right">GA</th>
        <th class="right">GD</th>
        <th class="left">Note</th>
      </tr>
    </thead>
    <tbody>
      {% for goal in site.data.frauen-goals %}
        {% if goal.id_scorer == include.player or goal.id_assist_official == include.player %}
          <tr data-scorer="{{ goal.id_scorer }}">
            <td class="left" data-sort="{{ goal.id_scorer }}">
              <div class="player-photo" style="background-image: url(assets/images/frauen/100/{{ goal.id_scorer }}.jpg)">
              </div>
              <a href="{{ goal.id_scorer }}.html">
                <span class="hide-on-small">{{ goal.scorer_first }}</span> {{ goal.scorer_last }}
              </a>
            </td>
            <td class="left">{% if goal.id_assist_official != nil %}<a href="{{ goal.id_assist_official }}.html">{{ goal.assist_official }}</a>{% endif %}</td>
            <td class="left" data-sort="{{ goal.date }}-{{ goal.gf }}">{{ goal.date | date: '%B %-d, %Y' }}</td>
            <td class="left">{{ goal.comp }}</td>
            <td class="left" data-sort="{{ goal.round_alt }}">{{ goal.round }}</td>
            <td class="right" data-sort="{{ goal.min_alt }}">{{ goal.min }}</td>
            <td class="left">{{ goal.opponent }}</td>
            <td class="left">{{ goal.venue }}</td>
            <td class="right">{{ goal.gf }}</td>
            <td class="right">{{ goal.ga }}</td>
            <td class="right">{{ goal.gd }}</td>
            <td class="left"><span>{{ goal.note }}</span></td>
          </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
  new Tablesort(document.getElementById('player-goals'));
</script>

{% include table-search-script.html %}
